{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
    <nav>
        <ul>
            <li><strong>Dashboard do Professor</strong></li>
        </ul>
        <ul>
            <li>Olá, {{ current_user.nome }}!</li>
            <li><a href="{{ url_for('logout') }}" role="button" class="secondary">Sair</a></li>
        </ul>
    </nav>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="{{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <article>
        <hgroup>
            <h2>Gerenciar Turmas</h2>
            <h3>Crie uma nova turma ou veja as existentes abaixo.</h3>
        </hgroup>
        
        <form method="POST" action="{{ url_for('dashboard') }}">
            <div class="grid">
                <label for="nome_turma">
                    Nome da Turma
                    <input type="text" id="nome_turma" name="nome_turma" placeholder="Ex: 3º Ano B - Manhã" required>
                </label>
                <label for="codigo_turma">
                    Código Único da Turma
                    <input type="text" id="codigo_turma" name="codigo_turma" placeholder="Ex: 3B2025" required>
                </label>
            </div>
            <button type="submit">Criar Nova Turma</button>
        </form>
    </article>

    <article>
        <h3>Suas Turmas</h3>
        {% if turmas %}
            <table>
                <thead>
                    <tr>
                        <th scope="col">Nome da Turma</th>
                        <th scope="col">Código</th>
                    </tr>
                </thead>
                <tbody>
                    {% for turma in turmas %}
                    <tr>
                        <td>{{ turma.nome_turma }}</td>
                        <td>{{ turma.codigo_turma }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>Você ainda não criou nenhuma turma.</p>
        {% endif %}
    </article>

{% endblock %}